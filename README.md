# tk_traiding
Торговый бот, для тинькофф инвестиций, который занимается дневным трейдингом 
российских акций.
## Стратегия
 - бот получает рекомендации по торговле по выбранной системе
 - открывает сделки в шорт или в лонг в соответствии с рекомендациями
## Как запустить
- Скачайте репозиторий
```commandline
git clone https://github.com/AlbertSabirzianov/tk_traiding.git
```
- Зайдите в каталог проекта
```commandline
cd tk_trading/src
```
- для запуска вам необходимо задать переменные окружения (создать в папке src файл .env и прописать следующие значения)
```text
PROFIT_PERCENT=0.5 # Целевая процентная прибыль для стратегии.
STOPP_LOSS_PERCENT=0.2 # Процент стоп-лосса для стратегии.
STOCKS=["SBER", "TATN", "GAZP"] # Список символов акций, на которые будет применяться стратегия.
TK_API_KEY="api-key" # API-ключ для доступа к сервисам Тинькофф.
BOT_TOKEN=bot_token # токен телеграм бота для отправки информации
CHANEL_NAME="@test_channel_name" # телеграм канал, куда отправлять информацию
RECOMMENDATION_SYSTEM="trading_view" # Система, по которой скрипт будет получать рекомендации по торговле,
список доступных систем смотри ниже
```
обратите внимания, что в список символов акций должны попадать только те инструменты,
которые вам доступны, проверить это можно на сайте тинькофф инвестиций.<br/>
Телеграмм бот, указанный в ```BOT_TOKEN``` должен быть администратором канала
```CHANEL_NAME```, для того чтобы отправлять в него уведомления.
- утановите зависимости
```commandline
pip install -r requirements.txt
```
- после чего вы можете запускать скрипт
```commandline
python main.py
```
Скрипт войдет в сделки по указанным в переменной ```STOCKS``` акциям на всю доступную
в портфеле сумму на депозите. Каждая сделка - это лонг или шорт позиция по акцие с установленными
стоп ордерами - стоп лосс (для ограничения убытка, регулируется в переменной ```STOPP_LOSS_PERCENT```) 
и тейк профит (для фиксации прибыли, регулируется в переменной ```PROFIT_PERCENT```).
# Описание доступных систем рекомендаций
| Название     | Описание                                                                                                                                                                                                                                                                                             |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| trading_view | Система рекомендаций, которая генерирует действия для торговли акциями на основе общего анализа TradingView.                                                                                                                                                                                         |
| random       | Система рекомендаций, которая генерирует случайные действия для торговли акциями, используя модуль random                                                                                                                                                                                            |
| rsi          | Система рекомендаций, на основе индикатора RSI (Relative Strength Index). Если RSI выше 70, считается, что акция перекуплена, и генерируется сигнал на продажу (SELL).- Если RSI ниже 30, считается, что акция перепродана, и генерируется сигнал на покупку (BUY).                                  |                                |
| stoch_rsi    | Система рекомендаций, на основе индикатора Stochastic RSI. Система анализирует значения быстрого и сглаженного Stochastic RSI и генерирует сигнал на покупку, если %K пересекает %D снизу вверх в зоне перепроданности и сигнал на продажу, если %K пересекает %D сверху вниз в зоне перекупленности |
# Рекомендации по использованию
- Для успешной торговли минимально рекомендуемое соотношение переменных ```STOPP_LOSS_PERCENT``` и ```PROFIT_PERCENT```
1:2, то есть ```PROFIT_PERCENT``` должен превышать ```STOPP_LOSS_PERCENT``` как минимум в 2 раза.
Это позволяет трейдеру получать прибыль, превышающую убытки в случае неудачных сделок.
- В переменной ```STOCKS``` рекомендуется указывать только самые ликвидные акции Московской биржи, так называемые
Голубые фишки. Список голубых фишек можно посмотреть на [сайте мосбиржи](https://www.moex.com/ru/index/MOEXBC/constituents)
- Скрипт можно запускать в любое рабочее время биржи, множество раз в день 

# Формирование отчётности

В репозитории так же имеется скрипт по формировании отчётности ```report.py```, который 
 - Получает операции через API Тинькофф Инвестиций.
 - Рассчитывает результаты торговли в рублях и в процентном соотношении.
 - Отправляет уведомление в Telegram.
 - Записывает результаты в CSV файл.

Рекомендуется использовать его в совокупности с торговым ботом, для фиксации и
мониторинга результатов торговли, запуская его в каждый торговый день.



